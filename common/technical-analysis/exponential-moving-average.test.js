import { exponentialMovingAverage } from './exponential-moving-average'

import testData from './_data'

import { log } from '../log'

// log.setLevel('debug')

test('exponentialMovingAverage', () => {
  const actual = testData
  const precision = 8
  const input = 'close'
  const length = 14
  const expected = [
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    0.00102751,
    0.00102604,
    0.0010263,
    0.00102659,
    0.0010265,
    0.00102514,
    0.00102592,
    0.00102634,
    0.00102428,
    0.001024,
    0.00102311,
    0.00102201,
    0.00102127,
    0.00102105,
    0.00102187,
    0.00102137,
    0.00102066,
    0.00101906,
    0.00101732,
    0.00101579,
    0.00101505,
    0.00101523,
    0.00101442,
    0.00101377,
    0.00101337,
    0.0010126,
    0.00101157,
    0.0010111,
    0.00101179,
    0.00101116,
    0.00100984,
    0.00100937,
    0.00101101,
    0.00101033,
    0.00100989,
    0.00100934,
    0.00100957,
    0.0010086,
    0.00100876,
    0.00100813,
    0.00100904,
    0.00100718,
    0.00100644,
    0.00100689,
    0.00100717,
    0.00100696,
    0.00100697,
    0.00100713,
    0.00100729,
    0.00100778,
    0.00100753,
    0.0010069,
    0.00100801,
    0.00100748,
    0.00100682,
    0.00100769,
    0.00100677,
    0.00100543,
    0.00100531,
    0.0010055,
    0.00100505,
    0.00100479,
    0.00100383,
    0.00100357,
    0.00100383,
    0.00100238,
    0.0010014,
    0.00100081,
    0.00099697,
    0.00099217,
    0.00098687,
    0.00098167,
    0.00097675,
    0.00097208,
    0.00096867,
    0.00096744,
    0.00096435,
    0.00096127,
    0.00095861,
    0.00095646,
    0.00094876,
    0.00094442,
    0.00094143,
    0.0009395,
    0.00093863,
    0.00093662,
    0.00093388,
    0.00093232,
    0.00092912,
    0.0009281,
    0.00092784,
    0.00092804,
    0.00092755,
    0.00093007,
    0.00093182,
    0.00093152,
    0.00093327,
    0.00093235,
    0.00093079,
    0.00093332,
    0.00093609,
    0.00093877,
    0.00093822,
    0.00094041,
    0.00094219,
    0.00094423,
    0.00094594,
    0.00094779,
    0.00095046,
    0.00095138,
    0.00095246,
    0.00095462,
    0.00095653,
    0.0009565,
    0.00095575,
    0.00095752,
    0.00095851,
    0.00095923,
    0.00096104,
    0.00096036,
    0.00096005,
    0.00095932,
    0.00095482,
    0.00095466,
    0.00095364,
    0.00095288,
    0.00095237,
    0.00095166,
    0.00095087,
    0.00094842,
    0.00094647,
    0.00094536,
    0.00094387,
    0.00094077,
    0.00093415,
    0.00093592,
    0.00093569,
    0.00093405,
    0.00093295,
    0.00093204,
    0.00093138,
    0.0009316,
    0.00093215,
    0.00093391,
    0.0009348,
    0.00093352,
    0.00093349,
    0.00093586,
    0.00093489,
    0.00093389,
    0.00093584,
    0.00093701,
    0.00093738,
    0.00094134,
    0.00094215,
    0.00094406,
    0.00094621,
    0.00094754,
    0.00094943,
    0.00095104,
    0.00095102,
    0.0009531,
    0.00095456,
    0.00095536,
    0.00095542,
    0.000957,
    0.00095742,
    0.0009577,
    0.00096078,
    0.00096128,
    0.00096343,
    0.0009633,
    0.00096366,
    0.00096467,
    0.00096581,
    0.00096622,
    0.00096757,
    0.00096779,
    0.00096772,
    0.00096765,
    0.00096704,
    0.00096726,
    0.00096601,
    0.00096457,
    0.00096311,
    0.0009635,
    0.00096445,
    0.00096657,
    0.00097174,
    0.00097486,
    0.00097728,
    0.0009797,
    0.00098196,
    0.00098279,
    0.00098495,
    0.00098614,
    0.0009869,
    0.00099063,
    0.00099236,
    0.00099747,
    0.00100178,
    0.00100238,
    0.00100275,
    0.00100305,
    0.00100226,
    0.00100112,
    0.00100221,
    0.00100085,
    0.00099994,
    0.00100054,
    0.00100087,
    0.00100198,
    0.00100207,
    0.00100191,
    0.00100098,
    0.00100114,
    0.00099972,
    0.00099975,
    0.00099957,
    0.00099958,
    0.00099954,
    0.00099965,
    0.0010007,
    0.00100129,
    0.00100011,
    0.0009997,
    0.00099904,
    0.00099895,
    0.00099917,
    0.0009995,
    0.0009997,
    0.00100002,
    0.00099973,
    0.00099989,
    0.00100083,
    0.00100099,
    0.00100127,
    0.00100159,
    0.00100204,
    0.0010034,
    0.00100444,
    0.00100555,
    0.00100692,
    0.00100737,
    0.00100873,
    0.00100964,
    0.0010101,
    0.0010094,
    0.00100898,
    0.00100899,
    0.00100938,
    0.00100969,
    0.00100848,
    0.0010088,
    0.00100774,
    0.00100702,
    0.00100698,
    0.00100506,
    0.00100443,
    0.00100372,
    0.00100359,
    0.00100274,
    0.0010028,
    0.00100154,
    0.00099956,
    0.00099498,
    0.00099256,
    0.00099115,
    0.00098942,
    0.00098653,
    0.00098614,
    0.00098416,
    0.00098004,
    0.00097522,
    0.00096755,
    0.00096107,
    0.00095495,
    0.00094695,
    0.00094748,
    0.00094268,
    0.00093965,
    0.00093641,
    0.00093198,
    0.00092751,
    0.00092274,
    0.00091362,
    0.00090561,
    0.00090443,
    0.00090333,
    0.00090329,
    0.00090114,
    0.00089656,
    0.00089639,
    0.00089456,
    0.00089147,
    0.00089237,
    0.00089263,
    0.00088723,
    0.00089022,
    0.00089352,
    0.00089478,
    0.00089208,
    0.00089191,
    0.00088971,
    0.0008884,
    0.00088737,
    0.00089007,
    0.00089111,
    0.00089146,
    0.00089284,
    0.00089432,
    0.00089585,
    0.00089483,
    0.00089388,
    0.00089422,
    0.00089395,
    0.00089065,
    0.00089099,
    0.00089176,
    0.00088973,
    0.00088762,
    0.00088689,
    0.00088655,
    0.00088671,
    0.00088655,
    0.00088248,
    0.00088041,
    0.00087947,
    0.00087501,
    0.00087407,
    0.00087237,
    0.00086997,
    0.0008691,
    0.00086942,
    0.00086823,
    0.00086824,
    0.00086567,
    0.00085961,
    0.00086179,
    0.00086118,
    0.00085866,
    0.00085711,
    0.00085501,
    0.00085272,
    0.00085211,
    0.00084988,
    0.0008482,
    0.00084594,
    0.00084347,
    0.00084253,
    0.00084361,
    0.00083922,
    0.00083622,
    0.0008305,
    0.00082769,
    0.00082665,
    0.00082333,
    0.00081917,
    0.00081869,
    0.00081842,
    0.00081751,
    0.0008159,
    0.00081418,
    0.00081321,
    0.00080896,
    0.00080586,
    0.00080481,
    0.0008057,
    0.00080511,
    0.00080226,
    0.00080566,
    0.00080631,
    0.00080587,
    0.00080511,
    0.00080585,
    0.00080679,
    0.00080493,
    0.00080506,
    0.00080499,
    0.00080545,
    0.00080557,
    0.00080413,
    0.00080321,
    0.0008015,
    0.00080025,
    0.00079884,
    0.00079866,
    0.00079787,
    0.00079629,
    0.00079545,
    0.00079433,
    0.00079284,
    0.00079285,
    0.00079188,
    0.00078999,
    0.00078812,
    0.00078834,
    0.00078931,
    0.00078941,
    0.00078926,
    0.00078881,
    0.00079065,
    0.00079112,
    0.00079038,
    0.00078985,
    0.00078839,
    0.0007839,
    0.00077819,
    0.00077329,
    0.00076878,
    0.00076447,
    0.00075965,
    0.00075663,
    0.0007502,
    0.00074378,
    0.0007412,
    0.00073949,
    0.00073666,
    0.00073068,
    0.00072863,
    0.00072752,
    0.00072639,
    0.00072559,
    0.0007241,
    0.00072321,
    0.00071817,
    0.0007183,
    0.00072041,
    0.00072178,
    0.0007193,
    0.00071745,
    0.0007168,
    0.00071705,
    0.00071575,
    0.00071511,
    0.00071474,
    0.00071748,
    0.00072499,
    0.00072904,
    0.00073214,
    0.00073597,
    0.00073666,
    0.0007359,
    0.00073527,
    0.00073468,
    0.00073292,
    0.00073268,
    0.0007324,
    0.00073508,
    0.00073817,
    0.00073552,
    0.00073355,
    0.00073234,
    0.00073399,
    0.00073213,
    0.00073148,
    0.00073247,
    0.00073118,
    0.00073332,
    0.00073378,
    0.00073425,
    0.00073463,
    0.00073404,
    0.00073549,
    0.00073609,
    0.00073794,
    0.00073673,
    0.00073544,
    0.00073634,
    0.00073595,
    0.00073715,
    0.00073728,
    0.00073737,
    0.00073689,
    0.00073704,
    0.00073717,
    0.00073658,
    0.00073552,
    0.00073586,
    0.00073572,
    0.00073524,
    0.00073574,
    0.0007335,
    0.00073118,
    0.00072962,
    0.00072771,
    0.00072802,
    0.00072927,
    0.00073052,
    0.00073126,
    0.00073273,
    0.00073573,
    0.00073916,
    0.00074004,
    0.00073853,
    0.0007386,
    0.00073959,
    0.00074248,
    0.00074312,
    0.00074625,
    0.00074677,
    0.00075394,
    0.00076036,
    0.0007686,
    0.00077386,
    0.00077465,
    0.00078256,
    0.00078831,
    0.00079765,
    0.00080482,
    0.00080789,
    0.00081004,
    0.00081431,
    0.00082269,
    0.00082377,
    0.00082142,
    0.00081893,
    0.00081812,
    0.00082284,
    0.00082459,
    0.00082698,
    0.00082616,
    0.00082096,
    0.00081651,
    0.00081545,
    0.00081012,
    0.00080549,
    0.00080075,
    0.00079903,
    0.00079904,
    0.00079832,
    0.00079996,
    0.00079977,
    0.00079774,
    0.0007938,
    0.00079344,
    0.00079263,
    0.00079017,
    0.00079101,
    0.00079389,
    0.00079244,
    0.00079228,
    0.00079583,
    0.00079693,
    0.00079987,
    0.00080287,
    0.00080662,
    0.00080894,
    0.00080948,
    0.00080974,
    0.00080981,
    0.00080938,
    0.00080888,
    0.00081095,
    0.00081173,
    0.00081294,
    0.00081542,
    0.00081616,
    0.00081771,
    0.00081475,
    0.00081514,
    0.0008105,
    0.00081051,
    0.00081004,
    0.00080987,
    0.00080772,
    0.00080372,
    0.00080315,
    0.00080213,
    0.00080018,
    0.00079789,
    0.0007962,
    0.0007941,
    0.00079301,
    0.0007931,
    0.00079135,
    0.00079073,
    0.00078827,
    0.00078816,
    0.00078515,
    0.00078084,
    0.00077633,
    0.00077257,
    0.00077076,
    0.0007682,
    0.00076611,
    0.00076363,
    0.00076176,
    0.00076009,
    0.00075986,
    0.00075942,
    0.00075428,
    0.00075285,
    0.00075319,
    0.00075179,
    0.00075072,
    0.00074935,
    0.00074881,
    0.00074781,
    0.00074677,
    0.00074683,
    0.00074776,
    0.00074758,
    0.00074916,
    0.00074936,
    0.00074986,
    0.00075138,
    0.00075414,
    0.0007559,
    0.00075824,
    0.00075673,
    0.00075641,
    0.00075664,
    0.0007566,
    0.00075712,
    0.00075684,
    0.0007576,
    0.00075647,
    0.00075926,
    0.00075886,
    0.00075838,
    0.00075489,
    0.00075134,
    0.00074899,
    0.00074662,
    0.00074331,
    0.00074109,
    0.00074073,
    0.0007416,
    0.00074221,
    0.00074191,
    0.00074164,
    0.00074074,
    0.00073749,
    0.00073709,
    0.00073678,
    0.00073624,
    0.00073557,
    0.00073664,
    0.00073844,
    0.00073915,
    0.00074029,
    0.00073876,
    0.0007397,
    0.00073949,
    0.00074129,
    0.0007437,
    0.00074518,
    0.00074611,
    0.00074586,
    0.00074634,
    0.00074725,
    0.0007473,
    0.00074731,
    0.00074702,
    0.00074827,
    0.00074845,
    0.00074902,
    0.00075005,
    0.00075019,
    0.00075055,
    0.00075017,
    0.00075139,
    0.00075171,
    0.00075201,
    0.00075168,
    0.00075145,
    0.00075042,
    0.00074927,
    0.00074877,
    0.00074878,
    0.00074942,
    0.00075279,
    0.00075269,
    0.00075335,
    0.00075408,
    0.00075435,
    0.00075369,
    0.0007521,
    0.00074984,
    0.00074879,
    0.000749,
    0.00074766,
    0.00074801,
    0.00074859,
    0.00074715,
    0.00074584,
    0.00074524,
    0.00074456,
    0.00074357,
    0.00074285,
    0.00074314,
    0.00074366,
    0.00074413,
    0.00074456,
    0.00074396,
    0.00074454,
    0.00074525,
    0.00074543,
    0.00074606,
    0.00074645,
    0.00074584,
    0.00074488,
    0.00074356,
    0.00074326,
    0.0007419,
    0.00074116,
    0.00074069,
    0.0007408,
    0.00074069,
    0.00074044,
    0.00074009,
    0.00073963,
    0.00073871,
    0.00073848,
    0.00073699,
    0.0007378,
    0.00073767,
    0.00073778,
    0.00073855,
    0.00073835,
    0.00073772,
    0.00073778,
    0.00073733,
    0.00073779,
    0.00073766,
    0.00073807,
    0.00073765,
    0.00073763,
    0.00074214,
    0.00074621,
    0.00074881,
    0.00075105,
    0.00075291,
    0.00075502,
    0.00075768,
    0.00075987,
    0.00076074,
    0.00076131,
    0.00076221,
    0.00076357,
    0.00076947,
    0.00076966,
    0.00076976,
    0.00077016,
    0.00076993,
    0.0007704,
    0.00077294,
    0.0007732,
    0.00077329,
    0.00077325,
    0.00077344,
    0.00077402,
    0.00077388,
    0.00077474,
    0.00077453,
    0.00077478,
    0.00077367,
    0.00077401,
    0.00077642,
    0.00077575,
    0.00077522,
    0.00077459,
    0.00077338,
    0.0007732,
    0.00077276,
    0.00077245,
    0.00077783,
    0.00078375,
    0.00078872,
    0.0007946,
    0.00080025,
    0.00080399,
    0.00080788,
    0.00081155,
    0.00081332,
    0.00081531,
    0.0008174,
    0.00082002,
    0.00082893,
    0.00083159,
    0.00083326,
    0.00083998,
    0.00084619,
    0.00085272,
    0.00085754,
    0.00086355,
    0.00086435,
    0.00086271,
    0.00086457,
    0.0008654,
    0.0008653,
    0.00086652,
    0.00087039,
    0.00087732,
    0.00087852,
    0.00088059,
    0.00088063,
    0.00088157,
    0.00087691,
    0.00087385,
    0.00087488,
    0.00087051,
    0.00086801,
    0.00086689,
    0.00086514,
    0.00086227,
    0.00086041,
    0.00085623,
    0.00085712,
    0.00085746,
    0.00085717,
    0.00085974,
    0.00085873,
    0.00085703,
    0.00085984,
    0.00085924,
    0.00085893,
    0.00086183,
    0.00086409,
    0.00086438,
    0.00086496,
    0.00086614,
    0.00086611,
    0.00086677,
    0.00086721,
    0.00086839,
    0.0008699,
    0.00087065,
    0.00087312,
    0.000875,
    0.00087661,
    0.00088016,
    0.00088084,
    0.00088161,
    0.00088322,
    0.00088567,
    0.00088948,
    0.00089298,
    0.00089664,
    0.00089697,
    0.000899,
    0.00090184,
    0.00090422,
    0.00090773,
    0.00090866,
    0.00091334,
    0.00091619,
    0.00091989,
    0.00092462,
    0.00092778,
    0.00092807,
    0.00092956,
    0.00093089,
    0.0009341,
    0.0009363,
    0.00093626,
    0.00093929,
    0.00094067,
    0.00094171,
    0.0009415,
    0.00094074,
    0.00093912,
    0.00093874,
    0.00093785,
    0.00093719,
    0.00093652,
    0.00093499,
    0.00093163,
    0.00092769,
    0.00092514,
    0.00092342,
    0.0009215,
    0.0009202,
    0.00091825,
    0.00091728,
    0.00091509,
    0.00091355,
    0.00091003,
    0.00090692,
    0.00090366,
    0.00089801,
    0.0008959,
    0.00089597,
    0.00089721,
    0.00089635,
    0.00089662,
    0.00089795,
    0.00089845,
    0.0008985,
    0.00089611,
    0.00089491,
    0.00089551,
    0.00089866,
    0.00089776,
    0.00089875,
    0.00089902,
    0.00089937,
    0.00089915,
    0.00089989,
    0.00089856,
    0.0008972,
    0.00089592,
    0.00089485,
    0.0008959,
    0.00089487,
    0.00089314,
    0.00089337,
    0.00089148,
    0.00089085,
    0.00089046,
    0.00089055,
    0.00089113,
    0.0008914,
    0.00089123,
    0.00089203,
    0.00089131,
    0.00089162,
    0.00089159,
    0.00089116,
    0.00088993,
    0.00088845,
    0.00088737,
    0.00088634,
    0.00088806,
    0.00088663,
    0.00088734,
    0.00088603,
    0.00088625,
    0.00088664,
    0.00088773,
    0.00088742,
    0.00088808,
    0.00088723,
    0.00088735,
    0.00088729,
    0.00088746,
    0.00088591,
    0.00088586,
    0.00088549,
    0.00088596,
    0.00088632,
    0.00088628,
    0.00088552,
    0.00088588,
    0.00088441,
    0.0008841,
    0.00088366,
    0.00088249,
    0.00088206,
    0.00088066,
    0.00087334,
    0.00086744,
    0.00086436,
    0.00085972,
    0.00085594,
    0.0008517,
    0.00084367,
    0.00083722,
    0.00083061,
    0.00082303,
    0.00081801,
    0.0008117,
    0.00080222,
    0.00079789,
    0.00079688,
    0.00079684,
    0.00079424,
    0.00079152,
    0.00078633,
    0.00078583,
    0.00078443,
    0.00078262,
    0.00078473,
    0.00078436,
    0.0007843,
    0.00078126,
    0.00078456,
    0.0007868,
    0.000787,
    0.00078675,
    0.0007877,
    0.00078683,
    0.00078602,
    0.00078631,
    0.00078692,
  ]

  expect(exponentialMovingAverage(actual, precision, input, length)).toEqual(
    expected,
  )
})
