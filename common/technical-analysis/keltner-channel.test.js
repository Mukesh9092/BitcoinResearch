import { keltnerChannel } from './keltner-channel'

import testData from './_data'

import { log } from '../log'

test('keltnerChannel', () => {
  const actual = testData
  const input = 'close'
  const length = 14
  const atrLength = 7
  const atrMultiplier = 2
  const expected = [
    [null, null, null],
    [null, null, null],
    [null, null, null],
    [null, null, null],
    [null, null, null],
    [null, null, null],
    [null, null, null],
    [null, null, null],
    [null, null, null],
    [null, null, null],
    [null, null, null],
    [null, null, null],
    [null, null, null],
    [null, null, null],
    [48.63901792858947, 50.70717407829871, 46.57086177888022],
    [48.53803020627709, 50.570735477456445, 46.50532493509774],
    [48.589652961335695, 50.40054319377514, 46.77876272889625],
    [48.7110449276735, 50.5003794126216, 46.9217104427254],
    [48.83715529550051, 50.505156282598875, 47.16915430840214],
    [48.69256878652005, 50.39656963260437, 46.98856794043573],
    [48.7613202244527, 50.37046380681069, 47.152176642094716],
    [48.825528206522044, 50.37336556282889, 47.2776908502152],
    [48.94695427555797, 50.76510058096384, 47.1288079701521],
    [49.48302168448994, 51.21286137483783, 47.753181994142054],
    [49.725768361348145, 51.319916667360616, 48.131620055335674],
    [49.947467726578935, 51.41102341744677, 48.4839120357111],
    [50.11513251577712, 51.57532310794955, 48.65494192360469],
    [50.12904480030566, 51.652065307882026, 48.60602429272929],
    [50.43409263884256, 52.14811021676516, 48.72007506091995],
    [50.66249215460634, 52.65450722139714, 48.67047708781554],
    [50.56926411111296, 52.52241988264793, 48.616108339577984],
    [50.25579774655493, 52.207074122156335, 48.30452137095353],
    [50.15016604101611, 52.051260077245885, 48.24907200478633],
    [50.113974558383816, 52.023483732295055, 48.20446538447258],
  ]

  expect(
    keltnerChannel(actual, input, length, atrLength, atrMultiplier),
  ).toEqual(expected)
})
